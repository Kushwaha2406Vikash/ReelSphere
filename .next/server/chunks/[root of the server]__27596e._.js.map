{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Lenovo/Desktop/Reel/my-app/lib/db.ts"],"sourcesContent":["\r\nimport mongoose from \"mongoose\";\r\nimport dotenv from \"dotenv\";\r\ndotenv.config();\r\n\r\n\r\nconst MONGODB_URI = process.env.MONGODB_URI!;\r\nconsole.log(\"MONGODB_URI:\", process.env.MONGODB_URI);\r\n\r\nif(!MONGODB_URI){\r\n    throw new Error(\"Please define mongodb uri in env file \");\r\n}\r\n\r\nlet cached = global.mongoose;\r\n\r\nif(!cached){\r\n    cached = global.mongoose = {conn:null,promise:null};\r\n}\r\n\r\n\r\nexport async function connectToDatabase() {\r\n    \r\n    if(cached.conn){\r\n        return cached.conn\r\n    }\r\n    if(!cached.promise){\r\n\r\n        const opts = {\r\n          bufferCommands:true,\r\n          maxPoolSize:10,\r\n        }\r\n    \r\n    cached.promise=mongoose.connect(MONGODB_URI, opts)\r\n    .then(()=> mongoose.connection);\r\n    \r\n}\r\n\r\ntry{\r\n   cached.conn = await cached.promise\r\n}catch(error){\r\n\r\n    cached.promise=null\r\n\r\n    throw new Error(\"Check database file\");\r\n}\r\n\r\nreturn cached.conn;\r\n\r\n} \r\n\r\n"],"names":[],"mappings":";;;;;;;;AAEA;;;AACA,uIAAA,CAAA,UAAM,CAAC,MAAM;AAGb,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;AAC3C,QAAQ,GAAG,CAAC,gBAAgB,QAAQ,GAAG,CAAC,WAAW;AAEnD,IAAG,CAAC,aAAY;IACZ,MAAM,IAAI,MAAM;AACpB;AAEA,IAAI,SAAS,OAAO,QAAQ;AAE5B,IAAG,CAAC,QAAO;IACP,SAAS,OAAO,QAAQ,GAAG;QAAC,MAAK;QAAK,SAAQ;IAAI;AACtD;AAGO,eAAe;IAElB,IAAG,OAAO,IAAI,EAAC;QACX,OAAO,OAAO,IAAI;IACtB;IACA,IAAG,CAAC,OAAO,OAAO,EAAC;QAEf,MAAM,OAAO;YACX,gBAAe;YACf,aAAY;QACd;QAEJ,OAAO,OAAO,GAAC,SAAS,OAAO,CAAC,aAAa,MAC5C,IAAI,CAAC,IAAK,SAAS,UAAU;IAElC;IAEA,IAAG;QACA,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IACrC,EAAC,OAAM,OAAM;QAET,OAAO,OAAO,GAAC;QAEf,MAAM,IAAI,MAAM;IACpB;IAEA,OAAO,OAAO,IAAI;AAElB"}},
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Lenovo/Desktop/Reel/my-app/models/User.ts"],"sourcesContent":["\r\nimport mongoose , {Schema,model,models} from \"mongoose\";\r\nimport bcrypt from \"bcryptjs\";\r\n\r\nexport interface IUser{\r\n    email:string;\r\n    password:string;\r\n    _id?:mongoose.Types.ObjectId;\r\n    createdAt?:Date;\r\n    updatedAt?:Date;\r\n}\r\n\r\n\r\nconst userSchema = new Schema<IUser>(\r\n  {\r\n    email:{type:String,required:true,unique:true},\r\n    password:{type:String,required:true},\r\n  },\r\n  {timestamps:true},\r\n);\r\n\r\nuserSchema.pre(\"save\",async function (next) {\r\n    \r\n    if(this.isModified(\"password\")){\r\n        this.password = await bcrypt.hash(this.password,10);\r\n    }\r\n    next()\r\n});\r\n\r\n\r\nconst User = models?.User || model<IUser>(\"User\",userSchema);\r\n \r\n\r\nexport default User;\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAaA,MAAM,aAAa,IAAI,OACrB;IACE,OAAM;QAAC,MAAK;QAAO,UAAS;QAAK,QAAO;IAAI;IAC5C,UAAS;QAAC,MAAK;QAAO,UAAS;IAAI;AACrC,GACA;IAAC,YAAW;AAAI;AAGlB,WAAW,GAAG,CAAC,QAAO,eAAgB,IAAI;IAEtC,IAAG,IAAI,CAAC,UAAU,CAAC,aAAY;QAC3B,IAAI,CAAC,QAAQ,GAAG,MAAM,OAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAC;IACpD;IACA;AACJ;AAGA,MAAM,OAAO,QAAQ,QAAQ,MAAa,QAAO;uCAGlC"}},
    {"offset": {"line": 172, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Lenovo/Desktop/Reel/my-app/app/api/auth/register/route.ts"],"sourcesContent":["\r\nimport { NextRequest,NextResponse } from \"next/server\";\r\n\r\nimport { connectToDatabase } from \"@/lib/db\";\r\nimport User from \"@/models/User\";\r\n\r\n\r\nexport async function POST(request:NextRequest){\r\n    try{\r\n\r\n     const {email,password}= await request.json();\r\n\r\n     if(!email || !password){\r\n        return NextResponse.json(\r\n            {error:\"Email and password are required\"},\r\n            {status:400}\r\n        )\r\n     }\r\n\r\n     \r\nasync function main() {\r\n   try {\r\n       const dbConnection = await connectToDatabase();\r\n       console.log('Database connected successfully');\r\n   } catch (error) {\r\n       console.error('Failed to connect to the database:', error);\r\n   }\r\n}\r\n\r\nmain();\r\n\r\n     const existingUser = await User.find({email});\r\n\r\n     if(existingUser){\r\n        return NextResponse.json(\r\n            {error:\"Email is already registered\"},\r\n            {status:400}\r\n        )\r\n     }\r\n     await User.create({\r\n        email,\r\n        password\r\n     })\r\n\r\n     return NextResponse.json(\r\n        {error:\"User  registered successfully\"},\r\n        {status:201}\r\n     );\r\n\r\n    }catch(error){\r\n        return NextResponse.json(\r\n            {error:\"Failed to  register User\"},\r\n            {status:500},\r\n            \r\n         );\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;AACA;AAEA;AACA;;;;AAGO,eAAe,KAAK,OAAmB;IAC1C,IAAG;QAEF,MAAM,EAAC,KAAK,EAAC,QAAQ,EAAC,GAAE,MAAM,QAAQ,IAAI;QAE1C,IAAG,CAAC,SAAS,CAAC,UAAS;YACpB,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACpB;gBAAC,OAAM;YAAiC,GACxC;gBAAC,QAAO;YAAG;QAElB;QAGL,eAAe;YACZ,IAAI;gBACA,MAAM,eAAe,MAAM,CAAA,GAAA,2GAAA,CAAA,oBAAiB,AAAD;gBAC3C,QAAQ,GAAG,CAAC;YAChB,EAAE,OAAO,OAAO;gBACZ,QAAQ,KAAK,CAAC,sCAAsC;YACxD;QACH;QAEA;QAEK,MAAM,eAAe,MAAM,gHAAA,CAAA,UAAI,CAAC,IAAI,CAAC;YAAC;QAAK;QAE3C,IAAG,cAAa;YACb,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACpB;gBAAC,OAAM;YAA6B,GACpC;gBAAC,QAAO;YAAG;QAElB;QACA,MAAM,gHAAA,CAAA,UAAI,CAAC,MAAM,CAAC;YACf;YACA;QACH;QAEA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACrB;YAAC,OAAM;QAA+B,GACtC;YAAC,QAAO;QAAG;IAGf,EAAC,OAAM,OAAM;QACT,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACpB;YAAC,OAAM;QAA0B,GACjC;YAAC,QAAO;QAAG;IAGnB;AACJ"}},
    {"offset": {"line": 233, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}